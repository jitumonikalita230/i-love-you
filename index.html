<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlock My Heart</title>
    <style>
        :root {
            --rose: #ff4d6d;
            --gold: #ffb703;
            --cream: #fff0f3;
        }

        body {
            margin: 0;
            background-color: var(--cream);
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        /* --- Game UI --- */
        #game-wrapper {
            text-align: center;
            transition: all 1s ease-out;
        }

        .stats {
            color: var(--rose);
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 80px);
            grid-gap: 10px;
            perspective: 1000px;
        }

        .card {
            width: 80px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .card-front {
            background-color: white;
            color: var(--rose);
        }

        .card-back {
            background-color: var(--rose);
            color: white;
            transform: rotateY(180deg);
        }

        /* --- Video Surprise --- */
        #video-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            display: none;
            z-index: 100;
            background: black;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 2s;
        }

        .message-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            text-align: center;
            z-index: 110;
            pointer-events: none;
        }

        .message-overlay h2 {
            font-size: 3.5rem;
            text-shadow: 0 0 15px rgba(255, 77, 109, 1);
            margin: 0;
        }

        /* Heart Animation */
        .floating-heart {
            position: absolute;
            animation: rise 4s ease-in forwards;
            z-index: 120;
        }

        @keyframes rise {
            from { transform: translateY(100vh) scale(1); opacity: 1; }
            to { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <div class="stats">Matches: <span id="score">0</span> / 8</div>
        <div class="memory-grid" id="grid"></div>
        <p style="color: var(--rose); margin-top: 20px;">Match all the pairs to unlock your surprise!</p>
    </div>

    <div id="video-container">
        <video id="romanticVideo" loop playsinline>
            <source src="https://assets.mixkit.co/videos/preview/mixkit-red-roses-and-a-small-gift-box-4158-large.mp4" type="video/mp4">
        </video>
        <div class="message-overlay">
            <h2 id="final-text">You Won My Heart! ‚ù§Ô∏è
                I Love YOu Soo Much ‚ù§Ô∏è, Sorry for everything 
            </h2>
        </div>
    </div>

    <script>
        const emojis = ['üíñ', 'üíñ', 'üéÅ', 'üéÅ', 'üíç', 'üíç', 'üíå', 'üíå', 'üåπ', 'üåπ', 'ü•Ç', 'ü•Ç', 'üïØÔ∏è', 'üïØÔ∏è', 'üß∏', 'üß∏'];
        let flippedCards = [];
        let matchedCount = 0;
        let canFlip = true;

        const grid = document.getElementById('grid');
        const scoreDisplay = document.getElementById('score');

        // Shuffle
        emojis.sort(() => Math.random() - 0.5);

        // Create Cards
        emojis.forEach((emoji, index) => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.emoji = emoji;
            card.dataset.index = index;

            card.innerHTML = `
                <div class="card-front">?</div>
                <div class="card-back">${emoji}</div>
            `;

            card.addEventListener('click', flipCard);
            grid.appendChild(card);
        });

        function flipCard() {
            if (!canFlip || this.classList.contains('flipped') || flippedCards.includes(this)) return;

            this.classList.add('flipped');
            flippedCards.push(this);

            if (flippedCards.length === 2) {
                canFlip = false;
                checkMatch();
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            if (card1.dataset.emoji === card2.dataset.emoji) {
                matchedCount++;
                scoreDisplay.innerText = matchedCount;
                flippedCards = [];
                canFlip = true;
                if (matchedCount === 8) endGame();
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                    canFlip = true;
                }, 1000);
            }
        }

        function endGame() {
            const wrapper = document.getElementById('game-wrapper');
            const videoCont = document.getElementById('video-container');
            const video = document.getElementById('romanticVideo');

            wrapper.style.opacity = '0';
            wrapper.style.transform = 'scale(0.8)';

            setTimeout(() => {
                wrapper.style.display = 'none';
                videoCont.style.display = 'block';
                setTimeout(() => {
                    video.style.opacity = '1';
                    video.play();
                    spawnHearts();
                }, 100);
            }, 1000);
        }

        function spawnHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.innerHTML = '‚ù§Ô∏è';
                heart.classList.add('floating-heart');
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 4000);
            }, 400);
        }
    </script>
</body>
</html>